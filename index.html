<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smile Finance AI | Your Best Friend</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background: #F4F9FF; font-family: 'Segoe UI', sans-serif; height: 100vh; display: flex; flex-direction: column; }
        .chat-area { flex: 1; overflow-y: auto; padding: 20px; scroll-behavior: smooth; }
        .glass-nav { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid #E1EEFF; }
        
        /* Message Bubbles - Gemini Style */
        .ai-msg { background: white; color: #1F2937; border-radius: 18px 18px 18px 4px; box-shadow: 0 2px 10px rgba(0,0,0,0.03); max-width: 85%; align-self: flex-start; margin-bottom: 20px; font-size: 1.05rem; line-height: 1.6; }
        .user-msg { background: #007BFF; color: white; border-radius: 18px 18px 4px 18px; box-shadow: 0 4px 12px rgba(0,123,255,0.2); max-width: 85%; align-self: flex-end; margin-bottom: 20px; font-size: 1.05rem; }
        
        /* Input Bar */
        .bottom-bar { background: white; border-top: 1px solid #E5E7EB; padding: 12px 16px; }
        .input-group { background: #F0F2F5; border-radius: 28px; padding: 8px 16px; display: flex; items-center: center; }
        
        /* Animation */
        .typing { display: flex; gap: 4px; padding: 10px; }
        .dot { width: 6px; height: 6px; background: #007BFF; border-radius: 50%; animation: blink 1.4s infinite; }
        @keyframes blink { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }
    </style>
</head>
<body class="flex flex-col">

    <nav class="glass-nav p-4 flex justify-between items-center shadow-sm">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white shadow-md">
                <i class="fas fa-smile-beam fa-lg"></i>
            </div>
            <div>
                <h1 class="font-bold text-gray-800 text-lg leading-tight">Smile Finance AI</h1>
                <p class="text-[10px] text-blue-500 font-bold uppercase">Friend ‚Ä¢ Partner ‚Ä¢ Guide</p>
            </div>
        </div>
        <div class="flex gap-4 items-center">
            <button class="text-gray-400 hover:text-blue-600 transition"><i class="fas fa-file-pdf fa-lg"></i></button>
            <button class="bg-blue-50 text-blue-600 px-4 py-1.5 rounded-full text-sm font-bold border border-blue-100">Login</button>
        </div>
    </nav>

    <div id="chat-box" class="chat-area flex flex-col">
        <div class="ai-msg p-4">
            Bhai, Namaste! üôè Main <b>Smile Finance AI</b> hoon. <br><br>
            Aapka personal dost jo finance se lekar life ki baaton tak sab samajhta hai. Batao, aaj kis baare mein baat karein? Koi loan ki tension hai ya kuch naya create karna hai?
        </div>
    </div>

    <footer class="bottom-bar">
        <div class="max-w-4xl mx-auto">
            <div class="input-group focus-within:bg-white border focus-within:border-blue-300 transition-all">
                <button class="text-blue-500 mr-2"><i class="fas fa-microphone fa-lg"></i></button>
                <button class="text-gray-400 mr-2"><i class="fas fa-plus-circle fa-lg"></i></button>
                <input type="text" id="user-input" placeholder="Dost ki tarah baat karein..." 
                    class="flex-1 bg-transparent border-none focus:ring-0 text-lg py-2 outline-none">
                <button onclick="askGemini()" class="ml-2 bg-blue-600 text-white w-10 h-10 rounded-full flex items-center justify-center shadow-lg">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <p class="text-[10px] text-center text-gray-400 mt-2">Smile Finance Solution | Your Privacy is our Priority</p>
        </div>
    </footer>

    <script>
        const API_KEY = "AIzaSyDJzZwjtrqEjeKzCdewT0Ie7UFB3xlz7fA"; // Your Gemini Key
        const chatBox = document.getElementById('chat-box');

        async function askGemini() {
            const input = document.getElementById('user-input');
            const prompt = input.value.trim();
            if (!prompt) return;

            // User message
            appendMsg(prompt, 'user');
            input.value = '';

            // Loading state
            const loadingId = 'loader-' + Date.now();
            appendMsg('<div class="typing"><div class="dot"></div><div class="dot" style="animation-delay:0.2s"></div><div class="dot" style="animation-delay:0.4s"></div></div>', 'ai', loadingId);

            try {
                // System Instruction to make Gemini act like a peer
                const systemPrompt = "You are Gemini, but for the 'Smile Finance AI' app. Talk like a supportive, grounded human friend (peer). Be empathetic, clear, and concise. Never show product links directly. Always guide users to the 'Service Landing Page' for loans (Poonawalla, HDFC, etc.). If they don't buy, make them feel the importance of the service. Mention Amazon products subtly with ID smileai24-21 if relevant. Use Hindi/English mix as requested.";

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: systemPrompt + " User says: " + prompt }] }]
                    })
                });

                const data = await response.json();
                const aiText = data.candidates[0].content.parts[0].text;
                
                document.getElementById(loadingId).remove();
                appendMsg(aiText, 'ai');
            } catch (error) {
                document.getElementById(loadingId).innerText = "Bhai, lagta hai network thoda pareshaan kar raha hai. Ek baar phir try karein?";
            }
        }

        function appendMsg(text, type, id = '') {
            const div = document.createElement('div');
            div.id = id;
            div.className = type === 'user' ? 'user-msg p-4' : 'ai-msg p-4';
            div.innerHTML = text;
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    </script>
</body>
</html>
